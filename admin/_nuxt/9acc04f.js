(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{439:function(e,t,n){"use strict";n(25),n(37);t.a={data:function(){return{allowedImageExtensions:/(\.jpg|\.jpeg|\.png|\.svg|\.webp|\.gif)$/i,allowedVideoExtensions:/(\.mp4)$/i,allowedExcelExtensions:/(\.xlsx)$/i,passwordLength:6,maxImageSize:1,maxExcelSize:2,maxVideoSize:2,reg:/^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,24}))$/}},methods:{isValidExcel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maxExcelSize;return e.size>1024*t*1024?this.$t("util.fSize",{size:t}):this.allowedExcelExtensions.exec(e.name)?null:this.$t("util.invFile")},isValidImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maxImageSize,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.size>1024*t*1024?this.$t("util.fSize",{size:t}):n&&!this.allowedImageExtensions.exec(e.name)?this.$t("util.invFile"):n||this.allowedVideoExtensions.exec(e.name)?null:this.$t("util.invFile")},isValidEmail:function(e){return this.reg.test(e)},isValidLength:function(e){return e&&e.length>=this.passwordLength||!1}}}},659:function(e,t,n){"use strict";n.r(t);n(25),n(54),n(122),n(676),n(8),n(681),n(683),n(684),n(685),n(686),n(687),n(688),n(689),n(690),n(691),n(692),n(693),n(694),n(695),n(696),n(698),n(699),n(700),n(701),n(702),n(703),n(704),n(705),n(706),n(38),n(40),n(278),n(153);var o=n(148),l=n(80),r=n(439),d={name:"VideoUpload",data:function(){return{scaleFactor:"",uploadMessage:null}},mixins:[l.a,r.a],components:{AjaxButton:o.default},props:{type:{type:String,default:"image"},fileUploading:{type:Boolean,default:!1},video:{type:String,default:""},image:{type:String,default:""},imageTitle:{type:String,default:""},btnText:{type:String,default:"Upload"}},computed:{isImage:function(){return"image"===this.type},errors:function(){return this.ERRORS&&this.ERRORS[this.type]},videoName:function(){return this.video||""},imageName:function(){var e;return null!==(e=this.image)&&void 0!==e?e:this.defaultImage}},methods:{dataURLtoFile:function(e,t){for(var n=e.split(","),o=n[0].match(/:(.*?);/)[1],l=atob(n[1]),r=l.length,d=new Uint8Array(r);r--;)d[r]=l.charCodeAt(r);return new File([d],t,{type:o})},capture:function(e){var video=document.getElementById("video");document.getElementById("source").src=URL.createObjectURL(e),video.load();var t=this;video.addEventListener("loadeddata",(function(){var n=this.videoWidth,o=this.videoHeight,canvas=document.createElement("canvas");canvas.width=n,canvas.height=o,canvas.getContext("2d").drawImage(this,0,0,n,o);var l=canvas.toDataURL("image/jpeg"),r={canvas:canvas,file:t.dataURLtoFile(l,"".concat(+new Date,".jpg")),base64:l};t.$emit("file-upload",{video:e,thumb:r.file})}))},fileChanged:function(e){var t=e.target.files[0];t&&(this.uploadMessage=this.isValidImage(t,this.maxVideoSize,!1),this.uploadMessage||this.capture(t))}}},c=n(16),component=Object(c.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-wrapper",class:{"has-error":e.uploadMessage}},[n("div",{staticClass:"file-input",class:{"pt-0":!e.isImage}},[n("input",{ref:"fileInput",attrs:{type:"file"},on:{change:e.fileChanged}}),e._v(" "),e.isImage?n("img",{attrs:{src:e.getImageURL(e.imageName),alt:e.imageTitle}}):n("div",[e.videoName?n("video",{attrs:{controls:"",autostart:"0"}},[n("source",{attrs:{src:e.getVideoURL(e.videoName),type:"video/mp4"}})]):n("div",[e._v("\n        "+e._s(e.$t("prod.noVid"))+"\n      ")])]),e._v(" "),e._m(0)]),e._v(" "),e.uploadMessage?n("span",{staticClass:"error mb-10"},[e._v("\n    "+e._s(e.uploadMessage)+"\n  ")]):e._e(),e._v(" "),n("ajax-button",{staticClass:"outline-btn",attrs:{type:"button",text:e.btnText,color:"primary","loading-text":e.$t("error.up"),"fetching-data":e.fileUploading},on:{clicked:function(t){return e.$refs.fileInput.click()}}})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("video",{staticStyle:{height:"0",width:"0",opacity:"0"},attrs:{id:"video",controls:"",autoplay:""}},[t("source",{attrs:{id:"source",type:"video/mp4"}})])}],!1,null,null,null);t.default=component.exports;installComponents(component,{AjaxButton:n(148).default})}}]);