(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{812:function(t,e,r){"use strict";r.r(e);r(20),r(19),r(27),r(28);var n=r(5),l=(r(8),r(17),r(100),r(150),r(37),r(53),r(23),r(25),r(54),r(80)),c=r(441),o=r(621),d=r(11),v=r(440),f=r(99),h=r(627),_=r(790);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={name:"orders",middleware:["common-middleware","auth"],data:function(){return{pdfList:[],loaded:!1,orderByOrders:{order_method:{title:this.$t("fSale.pMethod")},status:{title:this.$t("category.status")},total_amount:{title:this.$t("brand.price")},user_id:{title:this.$t("fSale.user")},created_at:{title:this.$t("category.date")}},checkedFilter:[],filterOptions:[{key:"cancelled",title:this.$t("index.orderCan")},{key:"cash_on_delivery",title:this.$t("fSale.cod")},{key:"card_payment",title:this.$t("fSale.card")},{key:"paypal",title:this.$t("fSale.paypal")},{key:"paid",title:this.$t("fSale.paid")},{key:"unpaid",title:this.$t("fSale.unpaid")}]}},mixins:[l.a,v.a],components:{OrderList:_.default,Invoice:h.default,InlinePopOver:f.default,ListPage:c.default,TableSort:o.default},computed:k({currencyIcon:function(){var t;return(null===(t=this.setting)||void 0===t?void 0:t.currency_icon)||"$"}},Object(d.c)("setting",["setting"])),methods:k({downloadPdf:function(){var t,e=this;if(this.pdfList=[],null!==(t=this.cbList)&&void 0!==t&&t.length){var r=[];this.itemList.forEach((function(i){r[i.id]=i})),this.cbList.forEach((function(i){r[i]&&e.pdfList.push(r[i])}))}this.$refs.bulkDelete.closePop();var i=0,n=this,l=setInterval((function(){if(n.cbList.length>i){var t,e="invoice".concat(n.cbList[i]);if(n.$refs[e].length>0)null===(t=n.$refs[e][0])||void 0===t||t.generatingPdf()}else clearInterval(l);i++}),200)},deleteAll:function(){this.$refs.bulkDelete.closePop(),this.deleteBulk()},deletedOrder:function(){this.emptyDashboard()},filterChanged:function(){this.$router.push({query:k(k({},this.$route.query),{},{page:1,orderBy:"created_at",orderByType:"desc",filter:this.checkedFilter.join(",")})})},userStr:function(t){var e,r,n;return null!==(e=null==t||null===(r=t.address)||void 0===r?void 0:r.name)&&void 0!==e?e:null==t||null===(n=t.address)||void 0===n?void 0:n.email},voucherStr:function(t){return t.voucher?"".concat(t.offered," (").concat(t.voucher,")"):this.$t("prod.na")}},Object(d.b)("dashboard",["emptyDashboard"])),mounted:function(){var t,e,r;this.checkedFilter=(null===(t=this.$route)||void 0===t||null===(e=t.query)||void 0===e||null===(r=e.filter)||void 0===r?void 0:r.split(","))||[]}},$=r(16),component=Object($.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.$store.state.admin.isVendor?r("order-list"):r("div",[r("div",{staticStyle:{height:"0",overflow:"hidden"}},t._l(t.pdfList,(function(data,t){return r("div",{key:t},[r("invoice",{ref:"invoice"+data.id,refInFor:!0,attrs:{order:data}})],1)})),0),t._v(" "),r("list-page",{ref:"listPage",attrs:{"list-api":"getOrders","delete-api":"deleteOrder","route-name":"orders",name:t.$t("fSale.orderD"),"order-options":t.orderByOrders,gate:"order"},on:{deleted:t.deletedOrder,list:function(e){t.itemList=e}},scopedSlots:t._u([{key:"table-top",fn:function(e){var n=e.orderOptions;return[r("div",{staticClass:"dply-felx gap-10 j-left f-wrap mb-15"},[r("table-sort",{attrs:{"order-by-options":n}}),t._v(" "),r("inline-pop-over",{ref:"bulkDelete",staticClass:"bulk-action mt-md-10",attrs:{arrow:!0},scopedSlots:t._u([{key:"button",fn:function(){return[t._v("\n              "+t._s(t.$t("title.act"))+"\n            ")]},proxy:!0},{key:"content",fn:function(){return[r("button",{staticClass:"outline-btn",on:{click:function(e){return e.preventDefault(),t.deleteAll.apply(null,arguments)}}},[t._v("\n                "+t._s(t.$t("category.delete"))+"\n              ")]),t._v(" "),r("button",{staticClass:"outline-btn",on:{click:function(e){return e.preventDefault(),t.downloadPdf.apply(null,arguments)}}},[t._v("\n                "+t._s(t.$t("setting.pi"))+"\n              ")])]},proxy:!0}],null,!0)})],1),t._v(" "),r("ul",{staticClass:"order-cb"},t._l(t.filterOptions,(function(e){return r("li",{key:e.key},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedFilter,expression:"checkedFilter"}],staticClass:"styled-checkbox",attrs:{id:"checkbox-"+e.key,type:"checkbox"},domProps:{value:e.key,checked:Array.isArray(t.checkedFilter)?t._i(t.checkedFilter,e.key)>-1:t.checkedFilter},on:{change:[function(r){var n=t.checkedFilter,l=r.target,c=!!l.checked;if(Array.isArray(n)){var o=e.key,d=t._i(n,o);l.checked?d<0&&(t.checkedFilter=n.concat([o])):d>-1&&(t.checkedFilter=n.slice(0,d).concat(n.slice(d+1)))}else t.checkedFilter=c},t.filterChanged]}}),t._v(" "),r("label",{attrs:{for:"checkbox-"+e.key}},[t._v("\n              "+t._s(e.title)+"\n            ")])])})),0)]}},{key:"table",fn:function(e){var n=e.list;return[r("tr",{staticClass:"lite-bold"},[r("th",[r("input",{attrs:{type:"checkbox"},on:{change:t.checkAll}})]),t._v(" "),r("th",[t._v(t._s(t.$t("fSale.orderUp")))]),t._v(" "),r("th",[t._v(t._s(t.$t("category.status")))]),t._v(" "),r("th",[t._v(t._s(t.$t("fSale.pMethod")))]),t._v(" "),r("th",[t._v(t._s(t.$t("fSale.pStatus")))]),t._v(" "),r("th",[t._v(t._s(t.$t("fSale.voucher")))]),t._v(" "),r("th",[t._v(t._s(t.$t("fSale.user")))]),t._v(" "),r("th",[t._v(t._s(t.$t("fSale.amount"))+"("+t._s(t.currencyIcon)+")")]),t._v(" "),r("th",[t._v(t._s(t.$t("category.created")))]),t._v(" "),r("th")]),t._v(" "),t._l(n,(function(e,n){return r("tr",{key:n,class:{"new-data":!parseInt(e.viewed)}},[r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.cbList,expression:"cbList"}],attrs:{type:"checkbox"},domProps:{value:e.id,checked:Array.isArray(t.cbList)?t._i(t.cbList,e.id)>-1:t.cbList},on:{change:function(r){var n=t.cbList,l=r.target,c=!!l.checked;if(Array.isArray(n)){var o=e.id,d=t._i(n,o);l.checked?d<0&&(t.cbList=n.concat([o])):d>-1&&(t.cbList=n.slice(0,d).concat(n.slice(d+1)))}else t.cbList=c}}})]),t._v(" "),r("td",[r("nuxt-link",{staticClass:"dply-felx j-left link",attrs:{to:"/orders/"+e.id}},[t._v("\n              #"+t._s(e.order)+"\n            ")])],1),t._v(" "),r("td",[t._v(t._s(t.orderStatus[e.status].title))]),t._v(" "),r("td",{staticClass:"mn-w-80x"},[t._v(t._s(t.paymentTypes[e.order_method]))]),t._v(" "),r("td",{class:{"color-success":parseInt(e.payment_done)===t.status.PUBLIC}},[t._v("\n            "+t._s(parseInt(e.payment_done)===t.status.PUBLIC?t.$t("fSale.paid"):t.$t("fSale.unpaid"))+"\n          ")]),t._v(" "),r("td",[t._v(t._s(t.voucherStr(e)))]),t._v(" "),r("td",[r("span",{staticClass:"ellipsis mx-w-150x"},[t._v(t._s(t.userStr(e)))])]),t._v(" "),r("td",{staticClass:"mn-w-90x"},[t._v(t._s(e.total_amount))]),t._v(" "),r("td",{staticClass:"mn-w-90x"},[t._v(t._s(e.created))]),t._v(" "),r("td",{staticClass:"ptb-10"},[t.$can("order","view")?r("button",{staticClass:"lite-btn",on:{click:function(r){return r.preventDefault(),t.$refs.listPage.editItem(e.id)}}},[t._v("\n              "+t._s(t.$t("fSale.view")))]):t._e(),t._v(" "),t.$can("order","delete")?r("button",{staticClass:"delete-btn lite-btn",on:{click:function(r){return r.preventDefault(),t.$refs.listPage.deleteItem(e.id)}}},[t._v("\n              "+t._s(t.$t("category.delete")))]):t._e()])])}))]}}])})],1)],1)}),[],!1,null,"389abd06",null);e.default=component.exports;installComponents(component,{InlinePopOver:r(99).default})}}]);