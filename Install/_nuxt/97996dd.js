(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{490:function(t,e,r){"use strict";r(18),r(19),r(26),r(17),r(27);var n=r(9),d=r(0);r(12),r(35),r(102),r(22),r(6),r(81),r(23),r(82);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a={data:function(){return{fetchingAddressData:!1}},methods:{addressAction:function(){var t=this;return Object(d.a)(regeneratorRuntime.mark((function e(){var data,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.addressData.email&&t.addressData.city&&t.addressData.phone&&t.addressData.name&&t.addressData.zip&&t.addressData.country&&t.addressData.address_1)){e.next=17;break}return t.submittingAddressData=!0,e.t0=t,e.t1=c,e.t2=c({},t.addressData),e.next=7,t.getUserToken();case 7:return e.t3=e.sent,e.t4={user_token:e.t3},e.t5=(0,e.t1)(e.t2,e.t4),e.next=12,e.t0.userAddressAction.call(e.t0,e.t5);case 12:200===(null==(data=e.sent)?void 0:data.status)?(t.hasAddressErrors=!1,t.setToastMessage(data.message)):201===(null==data?void 0:data.status)?t.setToastError(null===(r=data.data)||void 0===r||null===(n=r.form)||void 0===n?void 0:n.join(", ")):t.hasError(data),t.submittingAddressData=!1,e.next=18;break;case 17:t.hasAddressErrors=!0;case 18:case"end":return e.stop()}}),e)})))()},deleting:function(address){var t=this;return Object(d.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm(t.$t("cartProductTile.deleteAlert"))){e.next=20;break}return t.ajaxDeleting=address.id,e.t0=t,e.t1=address.id,e.next=6,t.getUserToken();case 6:return e.t2=e.sent,e.t3={user_token:e.t2},e.t4={id:e.t1,params:e.t3},e.next=11,e.t0.userAddressDelete.call(e.t0,e.t4);case 11:if(200!==(null==(data=e.sent)?void 0:data.status)){e.next=18;break}return t.setToastMessage(data.message),e.next=16,t.fetchingData();case 16:e.next=19;break;case 18:t.setToastError(data.data.form.join(", "));case 19:t.ajaxDeleting=0;case 20:case"end":return e.stop()}}),e)})))()},formatAddress:function(t){var e=[];if(e.push(t.address_1),t.address_2&&e.push(t.address_2),e.push(t.city+"-"+t.zip),this.countryList[t.country]){var r=this.countryList[t.country];r.states[t.state]&&e.push(r.states[t.state].name),e.push(r.name)}return e.filter((function(t){return null!=t})).join(", ")},fetchingData:function(){var t=this;return Object(d.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fetchingAddressData=!0,setTimeout(Object(d.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.settingRouteParam(),e.t0=t,e.t1=t.timeZone,e.t2=t.orderBy,e.t3=t.orderByType,e.t4=t.page,e.next=9,t.getUserToken();case 9:return e.t5=e.sent,e.t6=t.search,e.t7={time_zone:e.t1,order_by:e.t2,type:e.t3,page:e.t4,user_token:e.t5,q:e.t6},e.next=14,e.t0.userAddressAll.call(e.t0,e.t7);case 14:200!==(null==(data=e.sent)?void 0:data.status)&&t.hasError(data),e.next=21;break;case 18:return e.prev=18,e.t8=e.catch(0),e.abrupt("return",t.$nuxt.error(e.t8));case 21:t.fetchingAddressData=!1;case 22:case"end":return e.stop()}}),e,null,[[0,18]])}))),100);case 2:case"end":return e.stop()}}),e)})))()}}}},586:function(t,e,r){"use strict";r.r(e);r(124),r(35),r(18),r(19),r(22),r(6),r(26),r(17),r(27);var n=r(0),d=r(9),o=(r(12),r(292),r(24)),c=r(205),l=r(156),v=r(158),m=r(7),f=r(490),h=r(291),D=r(80);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(d.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var P={name:"ShippingAddressPopup",data:function(){return{states:{},addressData:null,loading:!1,hasAddressErrors:!1,dropdownOpen:!1,submittingAddressData:!1}},watch:{location:function(){this.settingCountry()},profile:function(){this.addressData.name=this.profile.name,this.addressData.email=this.profile.email}},props:{address:{type:Object,default:function(){return null}}},components:{Spinner:D.default,AjaxButton:h.default,PopOver:l.default,Dropdown:v.default},computed:_(_(_(_({invalidEmail:function(){var t;return!this.isValidEmail(null===(t=this.addressData)||void 0===t?void 0:t.email)},emailValid:function(){return this.addressData.email&&!this.invalidEmail},phoneCode:function(){var t;return this.phoneList[null===(t=this.addressData)||void 0===t?void 0:t.country]},editing:function(){return this.addressData&&this.addressData.id}},Object(m.c)("user",["profile"])),Object(m.c)("language",["langCode"])),Object(m.c)("resource",["countryList","phoneList"])),Object(m.c)("common",["location"])),mixins:[o.a,c.a,f.a],methods:_(_(_(_({savingAddressData:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.addressAction();case 2:t.hasAddressErrors||t.$emit("close");case 3:case"end":return e.stop()}}),e)})))()},settingCountry:function(){var t,e,r,n,d;this.addressData.country=""!==this.addressData.country.trim()?this.addressData.country.trim():this.location.countryCode,this.states=null!==(t=this.addressData)&&void 0!==t&&t.country?this.countryList[this.addressData.country].states:"",this.addressData.state=""!==(null===(e=this.addressData)||void 0===e||null===(r=e.state)||void 0===r?void 0:r.trim())?null===(n=this.addressData)||void 0===n||null===(d=n.state)||void 0===d?void 0:d.trim():this.location.region},selectedCountry:function(t){var e;this.addressData=_(_({},this.addressData),{country:t.value.code2}),this.states=t.value.states,this.addressData.state=Object.keys(t.value.states).length?null===(e=Object.values(t.value.states)[0])||void 0===e?void 0:e.code:""},selectedState:function(t){this.addressData.state=t.value.code}},Object(m.b)("resource",["setCountryList","setPhoneList"])),Object(m.b)("user",["userAddressAction","getUserToken"])),Object(m.b)("common",["fetchLocation","setToastMessage","setToastError","getRequest"])),Object(m.b)("order",["ratingReviewAction","ratingReviewFind"])),created:function(){},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,data,n,d,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.countryList&&t.phoneList){e.next=9;break}return t.loading=!0,e.next=4,t.getRequest({params:null,lang:t.langCode,api:"countriesPhones"});case 4:r=e.sent,data=r.data,t.setCountryList(null==data?void 0:data.countries),t.setPhoneList(null==data?void 0:data.phones),t.loading=!1;case 9:t.address?t.addressData=_(_({},t.addressData),t.address):(t.addressData={id:"",city:"",email:"",name:"",phone:"",country:"",state:"",zip:"",address_1:"",address_2:""},t.$nextTick((function(){t.profile&&(t.addressData.name=t.profile.name,t.addressData.email=t.profile.email)}))),t.addressData.country?(t.states=null!==(n=t.addressData)&&void 0!==n&&n.country?t.countryList[t.addressData.country].states:"",t.addressData.state=""!==(null===(d=t.addressData)||void 0===d||null===(o=d.state)||void 0===o?void 0:o.trim())?null===(c=t.addressData)||void 0===c||null===(l=c.state)||void 0===l?void 0:l.trim():t.location.region):t.settingCountry();case 11:case"end":return e.stop()}}),e)})))()}},O=r(11),component=Object(O.a)(P,(function(){var t=this,e=t._self._c;return e("form",{staticClass:"address-form",on:{submit:function(e){return e.preventDefault(),t.savingAddressData.apply(null,arguments)}}},[t.countryList?e("div",{staticClass:"input-wrap"},[e("label",[t._v("\n      "+t._s(t.$t("addressPopup.country"))+"\n    ")]),t._v(" "),e("dropdown",{attrs:{"selected-key":t.addressData.country,options:t.countryList,"key-name":"name",searching:!0},on:{clicked:t.selectCountry}})],1):t._e(),t._v(" "),e("div",{staticClass:"input-wrap",class:{invalid:!t.emailValid&&t.hasAddressErrors}},[e("label",[t._v("\n      "+t._s(t.$t("addressPopup.email"))+"\n    ")]),t._v(" "),e("div",{staticClass:"icon-input"},[e("i",{staticClass:"icon email-icon"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.addressData.email,expression:"addressData.email",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:t.$t("contact.your",{type:t.$t("contact.email")})},domProps:{value:t.addressData.email},on:{input:function(e){e.target.composing||t.$set(t.addressData,"email",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),!t.addressData.email&&t.hasAddressErrors?e("span",{staticClass:"error"},[t._v("\n      "+t._s(t.$t("addressPopup.isRequired",{type:t.$t("addressPopup.email")}))+"\n    ")]):t.invalidEmail&&t.hasAddressErrors?e("span",{staticClass:"error"},[t._v("\n      "+t._s(t.$t("contact.invalidEmail"))+"\n    ")]):t._e()]),t._v(" "),e("div",{staticClass:"flex"},[e("div",{staticClass:"input-wrap",class:{invalid:!t.addressData.name&&t.hasAddressErrors}},[e("label",[t._v("\n        "+t._s(t.$t("addressPopup.name"))+"\n      ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.addressData.name,expression:"addressData.name"}],attrs:{type:"text"},domProps:{value:t.addressData.name},on:{input:function(e){e.target.composing||t.$set(t.addressData,"name",e.target.value)}}}),t._v(" "),!t.addressData.name&&t.hasAddressErrors?e("span",{staticClass:"error"},[t._v("\n        "+t._s(t.$t("addressPopup.isRequired",{type:t.$t("addressPopup.name")}))+"\n      ")]):t._e()]),t._v(" "),t.phoneList?e("div",{staticClass:"input-wrap",class:{invalid:!t.addressData.phone&&t.hasAddressErrors}},[e("label",[t._v(" ")]),t._v(" "),e("div",{staticClass:"input-text"},[e("span",[t._v("\n          "+t._s(t.phoneList[t.addressData.country])+"\n        ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.addressData.phone,expression:"addressData.phone"}],attrs:{type:"text"},domProps:{value:t.addressData.phone},on:{input:function(e){e.target.composing||t.$set(t.addressData,"phone",e.target.value)}}})]),t._v(" "),!t.addressData.phone&&t.hasAddressErrors?e("span",{staticClass:"error"},[t._v("\n        "+t._s(t.$t("addressPopup.isRequired",{type:t.$t("addressPopup.phone")}))+"\n      ")]):t._e()]):t._e()]),t._v(" "),e("div",{staticClass:"input-wrap",class:{invalid:!t.addressData.address_1&&t.hasAddressErrors}},[e("label",[t._v("\n      "+t._s(t.$t("addressPopup.address"))+"\n    ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.addressData.address_1,expression:"addressData.address_1"}],staticClass:"mb-10",attrs:{type:"text",placeholder:t.$t("addressPopup.addressPlaceholder")},domProps:{value:t.addressData.address_1},on:{input:function(e){e.target.composing||t.$set(t.addressData,"address_1",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.addressData.address_2,expression:"addressData.address_2"}],attrs:{type:"text",placeholder:t.$t("addressPopup.address2Placeholder")},domProps:{value:t.addressData.address_2},on:{input:function(e){e.target.composing||t.$set(t.addressData,"address_2",e.target.value)}}}),t._v(" "),!t.addressData.address_1&&t.hasAddressErrors?e("span",{staticClass:"error"},[t._v("\n      "+t._s(t.$t("addressPopup.isRequired",{type:t.$t("addressPopup.address")}))+"\n    ")]):t._e()]),t._v(" "),e("div",{staticClass:"flex block-xxs"},[e("div",{staticClass:"input-wrap",class:{invalid:!t.addressData.city&&t.hasAddressErrors}},[e("label",[t._v("\n        "+t._s(t.$t("addressPopup.city"))+"\n      ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.addressData.city,expression:"addressData.city"}],attrs:{type:"text"},domProps:{value:t.addressData.city},on:{input:function(e){e.target.composing||t.$set(t.addressData,"city",e.target.value)}}}),t._v(" "),!t.addressData.city&&t.hasAddressErrors?e("span",{staticClass:"error"},[t._v("\n        "+t._s(t.$t("addressPopup.isRequired",{type:t.$t("addressPopup.city")}))+"\n      ")]):t._e()]),t._v(" "),e("div",{staticClass:"input-wrap",class:{invalid:!t.addressData.zip&&t.hasAddressErrors}},[e("label",[t._v("\n        "+t._s(t.$t("addressPopup.zipCode"))+"\n      ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.addressData.zip,expression:"addressData.zip"}],attrs:{type:"text"},domProps:{value:t.addressData.zip},on:{input:function(e){e.target.composing||t.$set(t.addressData,"zip",e.target.value)}}}),t._v(" "),!t.addressData.zip&&t.hasAddressErrors?e("span",{staticClass:"error"},[t._v("\n        "+t._s(t.$t("addressPopup.isRequired",{type:t.$t("addressPopup.zipCode")}))+"\n      ")]):t._e()]),t._v(" "),Object.keys(t.states).length?e("div",{staticClass:"input-wrap"},[e("label",[t._v("\n        "+t._s(t.$t("addressPopup.state"))+"\n      ")]),t._v(" "),e("dropdown",{attrs:{"selected-key":t.addressData.state,options:t.states,"key-name":"name"},on:{clicked:t.selectState}})],1):t._e()]),t._v(" "),e("div",{staticClass:"input-wrap"},[e("label",[t._v("\n      "+t._s(t.$t("shipping.instruction"))+"\n    ")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.addressData.delivery_instruction,expression:"addressData.delivery_instruction"}],domProps:{value:t.addressData.delivery_instruction},on:{input:function(e){e.target.composing||t.$set(t.addressData,"delivery_instruction",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"flex start mlr-0 gap-10"},[t.editing?e("button",{staticClass:"outline-btn plr-30 plr-sm-15",attrs:{"aria-label":"submit"},on:{click:function(e){return e.preventDefault(),t.clearData.apply(null,arguments)}}},[t._v("\n      "+t._s(t.$t("addressPopup.cancel"))+"\n    ")]):t._e(),t._v(" "),e("ajax-button",{staticClass:"primary-btn plr-30 plr-sm-15",attrs:{"fetching-data":t.submittingAddressData,"loading-text":t.$t("addressPopup.saving"),text:t.$t("addressPopup.thisAddress",{type:t.editing>0?t.$t("addressPopup.update"):t.$t("addressPopup.save")})}})],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Dropdown:r(158).default,AjaxButton:r(291).default})}}]);