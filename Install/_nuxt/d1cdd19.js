(window.webpackJsonp=window.webpackJsonp||[]).push([[105,11,50],{462:function(t,e,r){"use strict";r(18),r(19),r(22),r(26),r(27);var n=r(9),o=(r(6),r(17),r(202),r(23),r(54),r(7));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}e.a={computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.c)("common",["customScripts"])),mounted:function(){var t=this;this.customScripts.forEach((function(i){var e=new RegExp(null==i?void 0:i.route_pattern),r=t.$route.path;if(e.test(r)){if(null!=i&&i.header_script){var script=document.createElement("script");script.textContent=null==i?void 0:i.header_script_code,document.head.appendChild(script)}if(null!=i&&i.body_script){var n=document.createElement("script");n.textContent=null==i?void 0:i.body_script_code,document.body.appendChild(n)}}}))}}},473:function(t,e,r){"use strict";r.r(e);var n={name:"AccountLayout",data:function(){return{}},mixins:[],watch:{},props:{activeRoute:{type:String}},computed:{},mounted:function(){},methods:{goingNext:function(t){var e=t.split("/");this.$emit("clicked-".concat(e[e.length-1]))}}},o=r(11),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("client-only",[e("div",{staticClass:"container-fluid mtb-20 mtb-sm-15"},[e("div",{staticClass:"order-wrapper"},[e("ul",{staticClass:"left-sidebar"},[e("li",{class:{active:"profile"===t.activeRoute}},[e("nuxt-link",{attrs:{to:"/user/profile"},nativeOn:{click:function(e){return t.goingNext("/user/profile")}}},[t._v("\n            "+t._s(t.$t("accountLayout.myProfile"))+"\n          ")])],1),t._v(" "),e("li",{class:{active:"addresses"===t.activeRoute}},[e("nuxt-link",{attrs:{to:"/user/addresses"},nativeOn:{click:function(e){return t.goingNext("/user/addresses")}}},[t._v("\n            "+t._s(t.$t("accountLayout.myAddressBook"))+"\n          ")])],1),t._v(" "),e("li",{class:{active:"vouchers"===t.activeRoute}},[e("nuxt-link",{attrs:{to:"/user/vouchers"},nativeOn:{click:function(e){return t.goingNext("/user/vouchers")}}},[t._v("\n            "+t._s(t.$t("accountLayout.vouchers"))+"\n\n          ")])],1),t._v(" "),e("li",{class:{active:"orders"===t.activeRoute}},[e("nuxt-link",{attrs:{to:"/user/orders"},nativeOn:{click:function(e){return t.goingNext("/user/orders")}}},[t._v("\n            "+t._s(t.$t("accountLayout.myOrders"))+"\n          ")])],1),t._v(" "),e("li",{class:{active:"following"===t.activeRoute}},[e("nuxt-link",{attrs:{to:"/user/following"},nativeOn:{click:function(e){return t.goingNext("/user/following")}}},[t._v("\n            "+t._s(t.$t("store.followingStores"))+"\n          ")])],1),t._v(" "),e("li",{class:{active:"wishlists"===t.activeRoute}},[e("nuxt-link",{attrs:{to:"/user/wishlists"},nativeOn:{click:function(e){return t.goingNext("/user/wishlists")}}},[t._v("\n            "+t._s(t.$t("accountLayout.myWishlist"))+"\n          ")])],1),t._v(" "),e("li",{class:{active:"compared"===t.activeRoute}},[e("nuxt-link",{attrs:{to:"/user/compared"},nativeOn:{click:function(e){return t.goingNext("/user/compared")}}},[t._v("\n            "+t._s(t.$t("accountLayout.comparedList"))+"\n          ")])],1)]),t._v(" "),e("div",{staticClass:"right-area grow pos-rel"},[t._t("rightArea")],2)])])])}),[],!1,null,null,null);e.default=component.exports},479:function(t,e,r){"use strict";r.r(e);r(124);var n={name:"PasswordField",data:function(){return{password:"",passwordFieldType:"password"}},props:{isInvalid:{type:Boolean,default:!1},value:{type:String}},mixins:[],components:{},computed:{isPasswordTypePassword:function(){return"password"===this.passwordFieldType}},methods:{passwordFieldToggle:function(){this.isPasswordTypePassword?this.passwordFieldType="text":this.passwordFieldType="password"}},mounted:function(){this.password=this.value}},o=r(11),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"icon-input right-icon"},[e("i",{staticClass:"icon lock-icon"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password,expression:"password",modifiers:{trim:!0}}],class:{invalid:!t.password||t.isInvalid},attrs:{type:t.passwordFieldType,placeholder:t.$t("contact.your",{type:t.$t("login.password")})},domProps:{value:t.password},on:{change:function(e){return t.$emit("change",t.password)},input:function(e){e.target.composing||(t.password=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),e("i",{staticClass:"icon",class:t.isPasswordTypePassword?"eye-close-icon":"eye-icon",on:{click:t.passwordFieldToggle}})])}),[],!1,null,null,null);e.default=component.exports},570:function(t,e,r){"use strict";r.r(e);r(35),r(18),r(19),r(22),r(6),r(26),r(17),r(27);var n=r(0),o=r(9),l=(r(12),r(102),r(24)),c=r(205),d=r(473),f=r(80),v=r(7),m=r(291),w=r(479),h=r(462);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function P(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var y={middleware:["common-middleware","auth"],head:function(){return{title:"Profile",meta:[]}},data:function(){return{name:"",email:"",currentPassword:"",newPassword:"",confirmPassword:"",hasProfileError:!1,deletingAccount:!1,hasPasswordError:!1,profileSubmitting:!1,passwordSubmitting:!1,fetchingProfileData:!1}},components:{PasswordField:w.default,AjaxButton:m.default,AccountLayout:d.default,Spinner:f.default},watch:{profile:function(t){this.profile&&(this.email=null==t?void 0:t.email,this.name=null==t?void 0:t.name)}},mixins:[l.a,c.a,h.a],computed:P({loggedInWithGoogle:function(){var t;return this.profile&&(null===(t=this.profile)||void 0===t?void 0:t.google_id)},loggedInWithFacebook:function(){var t;return this.profile&&(null===(t=this.profile)||void 0===t?void 0:t.facebook_id)},loggedInWithEmail:function(){var t,e;return this.profile&&!(null!==(t=this.profile)&&void 0!==t&&t.facebook_id)&&!(null!==(e=this.profile)&&void 0!==e&&e.google_id)},loggedInWith:function(){if(this.profile)return this.loggedInWithGoogle?this.$t("profile.google"):this.loggedInWithFacebook?this.$t("profile.facebook"):this.$t("addressPopup.email")},invalidPassword:function(){return!this.isValidLength(this.newPassword)},passwordValid:function(){return this.newPassword&&!this.invalidPassword}},Object(v.c)("user",["profile"])),methods:P(P(P({deleteAccount:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm(t.$t("cartProductTile.deleteAlert"))){e.next=8;break}return t.deletingAccount=!0,e.next=4,t.deleteRequest({api:"deleteAccount",requiredToken:!0,lang:t.langCode});case 4:data=e.sent,t.deletingAccount=!1,200===(null==data?void 0:data.status)?(t.setToastMessage(data.message),t.$auth.logout()):t.setToastError(data.data.form.join(", ")),t.deletingAccount=0;case 8:case"end":return e.stop()}}),e)})))()},updatePassword:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.currentPassword||!t.newPassword||t.newPassword!==t.confirmPassword){e.next=9;break}return t.passwordSubmitting=!0,e.next=4,t.updateUserPassword({current_password:t.currentPassword,new_password:t.newPassword});case 4:201===(null==(data=e.sent)?void 0:data.status)?t.setToastError(data.data.form.join(", ")):200===(null==data?void 0:data.status)&&(t.loggingOut(),t.setToastMessage(data.message)),t.passwordSubmitting=!1,e.next=10;break;case 9:t.hasPasswordError=!0;case 10:case"end":return e.stop()}}),e)})))()},loggingOut:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t.$auth.logout(),t.emptyCartProduct(),e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",t.$nuxt.error(e.t0));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},updateUserProfile:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var data,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.name){e.next=9;break}return t.profileSubmitting=!0,e.next=4,t.updateProfile({name:t.name});case 4:data=e.sent,t.profileSubmitting=!1,201===(null==data?void 0:data.status)?t.setToastError(data.data.form.join(", ")):200===(null==data?void 0:data.status)?((r=P({},t.$auth.user)).name=data.data.name,t.$auth.setUser(r),t.setToastMessage(data.message)):200!==(null==data?void 0:data.status)&&t.hasError(data),e.next=10;break;case 9:t.hasProfileError=!0;case 10:case"end":return e.stop()}}),e)})))()}},Object(v.b)("cart",["emptyCartProduct"])),Object(v.b)("common",["setToastMessage","setToastError","deleteRequest"])),Object(v.b)("user",["updateProfile","updateUserPassword"])),mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.profile&&(t.email=null===(r=t.profile)||void 0===r?void 0:r.email,t.name=null===(n=t.profile)||void 0===n?void 0:n.name);case 1:case"end":return e.stop()}}),e)})))()}},x=r(11),component=Object(x.a)(y,(function(){var t=this,e=t._self._c;return e("account-layout",{staticClass:"user-profile-wrapper",class:{"email-login":!t.loggedInWithEmail},attrs:{"active-route":"profile"},scopedSlots:t._u([{key:"rightArea",fn:function(){return[t.fetchingProfileData?e("div",{staticClass:"spinner-wrapper flex"},[e("spinner",{attrs:{radius:100}})],1):e("div",{staticClass:"card"},[e("h5",{staticClass:"ptb-10 plr-20 plr-sm-15 b-b bold flex sided mlr-0"},[t._v("\n        "+t._s(t.$t("accountLayout.myProfile"))+"\n\n\n        "),e("ajax-button",{staticClass:"primary-btn plr-30 plr-sm-15",attrs:{type:"button","fetching-data":t.deletingAccount,text:t.$t("date.da")},on:{clicked:t.deleteAccount}})],1),t._v(" "),e("div",{staticClass:"flex wrap sided align-start p-20 pb-0 p-sm-15 pb-sm pb-xs"},[e("div",[e("div",{staticClass:"input-wrap"},[e("label",[t._v("\n              "+t._s(t.$t("addressPopup.email"))+"\n            ")]),t._v(" "),e("p",[t._v(t._s(t.email))])]),t._v(" "),e("div",{staticClass:"input-wrap"},[e("label",[t._v("\n              "+t._s(t.$t("orders.loggedWith"))+"\n            ")]),t._v(" "),e("p",[t._v(t._s(t.loggedInWith))])]),t._v(" "),e("form",{staticClass:"user-form mt-20 mt-sm-15",on:{submit:function(e){return e.preventDefault(),t.updateUserProfile.apply(null,arguments)}}},[e("p",{staticClass:"form-title"},[t._v("\n              "+t._s(t.$t("orders.updateProfile"))+"\n            ")]),t._v(" "),e("div",{staticClass:"input-wrap",class:{invalid:!t.name&&t.hasProfileError}},[e("label",[t._v("\n                "+t._s(t.$t("addressPopup.name"))+"\n              ")]),t._v(" "),e("div",{staticClass:"icon-input"},[e("i",{staticClass:"icon user-icon"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",placeholder:t.$t("addressPopup.name")},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),!t.name&&t.hasProfileError?e("span",{staticClass:"error"},[t._v("\n                  "+t._s(t.$t("addressPopup.isRequired",{type:t.$t("addressPopup.name")}))+"\n                ")]):t._e()]),t._v(" "),e("div",{staticClass:"flex j-end m-0"},[e("ajax-button",{staticClass:"primary-btn plr-30 plr-sm-15",attrs:{"fetching-data":t.profileSubmitting,text:t.$t("orders.updateProfile")}})],1)])]),t._v(" "),t.loggedInWithEmail?e("div",[e("form",{staticClass:"user-form",on:{submit:function(e){return e.preventDefault(),t.updatePassword.apply(null,arguments)}}},[e("p",{staticClass:"form-title"},[t._v("\n              "+t._s(t.$t("profile.updatePassword"))+"\n            ")]),t._v(" "),e("div",{staticClass:"input-wrap",class:{invalid:!t.currentPassword&&t.hasPasswordError}},[e("label",[t._v("\n                "+t._s(t.$t("profile.currentPassword"))+"\n              ")]),t._v(" "),e("password-field",{attrs:{value:t.currentPassword},on:{change:function(e){t.currentPassword=e}}}),t._v(" "),!t.currentPassword&&t.hasPasswordError?e("span",{staticClass:"error"},[t._v("\n                  "+t._s(t.$t("addressPopup.isRequired",{type:t.$t("profile.password")}))+"\n                ")]):t._e()],1),t._v(" "),e("div",{staticClass:"input-wrap",class:{invalid:!t.passwordValid&&t.hasPasswordError}},[e("label",[t._v("\n                "+t._s(t.$t("profile.password"))+"\n              ")]),t._v(" "),e("password-field",{attrs:{value:t.newPassword},on:{change:function(e){t.newPassword=e}}}),t._v(" "),!t.newPassword&&t.hasPasswordError?e("span",{staticClass:"error"},[t._v("\n                   "+t._s(t.$t("addressPopup.isRequired",{type:t.$t("profile.password")}))+"\n                ")]):t.invalidPassword&&t.hasPasswordError?e("span",{staticClass:"error"},[t._v("\n                  "+t._s(t.$t("profile.invalidLength"))+"\n                ")]):t._e()],1),t._v(" "),e("div",{staticClass:"input-wrap",class:{invalid:(!t.passwordValid||t.confirmPassword!==t.newPassword)&&t.hasPasswordError}},[e("label",[t._v("\n                "+t._s(t.$t("profile.confirmPassword"))+"\n              ")]),t._v(" "),e("password-field",{attrs:{value:t.confirmPassword},on:{change:function(e){t.confirmPassword=e}}}),t._v(" "),!t.confirmPassword&&t.hasPasswordError?e("span",{staticClass:"error"},[t._v("\n                   "+t._s(t.$t("addressPopup.isRequired",{type:t.$t("profile.password")}))+"\n                ")]):t.confirmPassword!==t.newPassword&&t.hasPasswordError?e("span",{staticClass:"error"},[t._v("\n                   "+t._s(t.$t("profile.noMatch"))+"\n                ")]):t._e()],1),t._v(" "),e("div",{staticClass:"flex j-end m-0"},[e("ajax-button",{staticClass:"primary-btn plr-30",attrs:{"fetching-data":t.passwordSubmitting,"loading-text":t.$t("profile.updatingPassword"),text:t.$t("profile.updatePassword")}})],1)])]):t._e()])])]},proxy:!0}])})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Spinner:r(80).default,AjaxButton:r(291).default,PasswordField:r(479).default,AccountLayout:r(473).default})}}]);