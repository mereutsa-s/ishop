(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{535:function(e,t,r){"use strict";r.r(t);r(18),r(19),r(22),r(6),r(26),r(17),r(27);var n=r(0),o=r(9),l=(r(12),r(201),r(102),r(24)),c=r(205),d=r(156),m=r(80),f=r(7),v=r(291);function O(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y={name:"OrderCancelPopup",data:function(){return{title:"",cancellationMessage:"",submitting:!1,hasFormError:!1,fetchingCancelledData:!1}},watch:{},props:{orderId:{type:Number,required:!0}},components:{AjaxButton:v.default,PopOver:d.default,Spinner:m.default},computed:h({},Object(f.c)("language",["langCode"])),mixins:[l.a,c.a],methods:h(h(h({serializing:function(e){this.title=e.title,this.cancellationMessage=e.message},submitForm:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var data,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.title||!e.cancellationMessage){t.next=19;break}return e.submitting=!0,t.t0=e,t.next=5,e.getUserToken();case 5:return t.t1=t.sent,t.t2=e.orderId,t.t3=e.cancellationMessage,t.t4=e.title,t.t5={user_token:t.t1,order_id:t.t2,message:t.t3,title:t.t4},t.t6=e.langCode,t.t7={payload:t.t5,lang:t.t6},t.next=14,t.t0.cancelOrder.call(t.t0,t.t7);case 14:data=t.sent,e.submitting=!1,200===(null==data?void 0:data.status)?(e.$emit("success"),e.setToastMessage(data.message)):204===(null==data?void 0:data.status)?e.setToastError(data.message):e.setToastError(null===(r=data.data)||void 0===r?void 0:r.form.join(", ")),t.next=20;break;case 19:e.hasFormError=!0;case 20:case"end":return t.stop()}}),t)})))()}},Object(f.b)("user",["getUserToken"])),Object(f.b)("common",["setToastMessage","setToastError"])),Object(f.b)("order",["cancelOrder","cancellationFind"])),created:function(){},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.fetchingCancelledData=!0,t.t0=e,t.t1=e.orderId,t.next=5,e.getUserToken();case 5:return t.t2=t.sent,t.t3={id:t.t1,user_token:t.t2},t.t4=e.langCode,t.t5={payload:t.t3,lang:t.t4},t.next=11,t.t0.cancellationFind.call(t.t0,t.t5);case 11:200===(null==(data=t.sent)?void 0:data.status)&&e.serializing(data.data),e.fetchingCancelledData=!1;case 14:case"end":return t.stop()}}),t)})))()}},j=r(11),component=Object(j.a)(y,(function(){var e=this,t=e._self._c;return t("pop-over",{staticClass:"cancel-popup",attrs:{title:e.$t("orderCancelPopup.cancelOrder"),"elem-id":"cancel-order-pop-over",layer:!0},on:{close:function(t){return e.$emit("close")}},scopedSlots:e._u([{key:"content",fn:function(){return[e.fetchingCancelledData?t("div",{staticClass:"mn-h-200x flex"},[t("spinner",{attrs:{radius:70}})],1):t("div",[t("div",{staticClass:"input-wrap",class:{invalid:!e.title&&e.hasFormError}},[t("label",[e._v("\n          "+e._s(e.$t("orderCancelPopup.title"))+"\n        ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{type:"text",placeholder:e.$t("contact.your",{type:e.$t("orderCancelPopup.titleSmall")})},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}}),e._v(" "),!e.title&&e.hasFormError?t("span",{staticClass:"error"},[e._v("\n            "+e._s(e.$t("addressPopup.isRequired",{type:e.$t("orderCancelPopup.title")}))+"\n          ")]):e._e()]),e._v(" "),t("div",{staticClass:"input-wrap mb-0",class:{invalid:!e.cancellationMessage&&e.hasFormError}},[t("label",[e._v(e._s(e.$t("addressPopup.message")))]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.cancellationMessage,expression:"cancellationMessage"}],domProps:{value:e.cancellationMessage},on:{input:function(t){t.target.composing||(e.cancellationMessage=t.target.value)}}}),e._v(" "),!e.cancellationMessage&&e.hasFormError?t("span",{staticClass:"error"},[e._v("\n            "+e._s(e.$t("addressPopup.isRequired",{type:e.$t("addressPopup.message")}))+"\n          ")]):e._e()])])]},proxy:!0},{key:"pop-footer",fn:function(){return[t("div",{staticClass:"flex j-end gap-10"},[t("button",{staticClass:"outline-btn plr-30 plr-sm-15",attrs:{"aria-label":"close"},on:{click:function(t){return t.preventDefault(),e.$emit("close")}}},[e._v("\n        "+e._s(e.$t("addressPopup.cancel"))+"\n      ")]),e._v(" "),t("ajax-button",{staticClass:"primary-btn plr-30 plr-sm-15",attrs:{type:"button","fetching-data":e.submitting,"loading-text":e.$t("checkoutRight.submitting"),text:e.$t("orderCancelPopup.SendMessage"),disabled:e.fetchingCancelledData},on:{clicked:e.submitForm}})],1)]},proxy:!0}])})}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Spinner:r(80).default,AjaxButton:r(291).default,PopOver:r(156).default})}}]);